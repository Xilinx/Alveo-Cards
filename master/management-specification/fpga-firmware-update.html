


<!DOCTYPE HTML>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
	<head>
		<meta charset="utf-8">
		<meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

		<meta http-equiv="content-type" content="text/html; charset=UTF-8"/>
		<link rel="stylesheet" href="https://static.cloud.coveo.com/searchui/v2.4382/css/CoveoFullSearch.css"/>
		<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
		<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
		<meta name="description"/>
		<meta name="keywords"/>
		<meta property="og:title" content=""/>
		<meta property="og:description"/>
		<!-- favicon -->
		<link rel="icon" type="image/vnd.microsoft.icon" href="_static/favicon.ico"/>
		<link rel="shortcut icon" type="image/vnd.microsoft.icon" href="_static/favicon.ico"/>
		<!-- Fonts -->
		<link href="https://fonts.googleapis.com/css?family=Roboto:300,400,500" rel="stylesheet" type="text/css"/>

	
		<!-- Google Tag Manager -->
	<script type="text/plain" class="optanon-category-C0002">(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
	new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
	j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
	'//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
	})(window,document,'script','dataLayer','GTM-5RHQV7');</script>
	<!-- End Google Tag Manager -->
	
        <!-- Google Tag Manager -->
        <noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-5RHQV7" height="0" width="0" style="display:none;visibility:hidden" class="optanon-category-C0002"></iframe></noscript>
        <!-- End Google Tag Manager -->	

  
  
  
  

  
      <script type="text/javascript" src="_static/js/jquery.min.js"></script>
	  <script type="text/javascript" src="_static/js/gtm.js"></script>
  <script type="text/javascript" src="_static/js/modernizr.min.js"></script>
    <script type="text/javascript" src="_static/js/d3dd8c60ed.js"></script>
    <script type="text/javascript" src="_static/js/common-ui-all.min.js"></script>
    <script type="text/javascript" src="_static/js/jquery-ui.min.js"></script>
    <script type="text/javascript" src="_static/js/CoveoJsSearch.Lazy.min.js"></script>
    <script type="text/javascript" src="_static/js/linkid.js"></script>
    <script type="text/javascript" src="_static/js/Searchbox.min.js"></script>
    <script type="text/javascript" src="_static/js/header-footer.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/css/common-ui-all.min.css" type="text/css" />
  <link rel="stylesheet" href="_static/css/header-footer.min.css" type="text/css" />
  <link rel="stylesheet" href="_static/css/pro.min.css" media="all" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/graphviz.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="DMTF Implementation" href="dmtf-support.html" />
    <link rel="prev" title="Satellite Controller Firmware Update Commands" href="sc-firmware-update.html" /> 
	</head>
	<body>
		<div class="xilinx-bs3"/>
		<div class="root responsivegrid">
			<div class="aem-Grid aem-Grid--16 aem-Grid--default--16 aem-Grid--large--16 aem-Grid--xlarge--16 aem-Grid--xxlarge--16 aem-Grid--xxxlarge--16 ">
 <div class="xilinxExperienceFragments experiencefragment aem-GridColumn aem-GridColumn--default--12">

    
    

    



<div class="xf-content-height">
    

<div class="aem-Grid aem-Grid--16 aem-Grid--default--16 ">
    
    <div class="header parbase aem-GridColumn aem-GridColumn--default--12"><noindex>
	<header data-component="header" class="site-header">
		<nav class="navbar navbar-default">
			<div class="container-fluid main-nav">
				<div class="row">
					<div class="navbar-column col-xs-4 col-sm-5">
						<ul class="nav navbar-nav hidden-xs">
							<li>
									<button onclick="window.location.href=&#39;https://www.xilinx.com/applications.html&#39;;">Solutions</button>
								</li>
							<li>
									<button onclick="window.location.href=&#39;https://www.xilinx.com/products/silicon-devices.html&#39;;">Products</button>
								</li>
							<li>
									<button onclick="window.location.href=&#39;https://www.xilinx.com/about/company-overview.html&#39;;">Company</button>
								</li>
							</ul>
							
						<ul class="nav navbar-nav hidden-sm hidden-md hidden-lg">
							<li>
									<button data-target="#header-container-0" data-function="toggle">Solutions</button>
								</li>
							<li>
									<button data-target="#header-container-1" data-function="toggle">Products</button>
								</li>
							<li>
									<button data-target="#header-container-2" data-function="toggle">Company</button>
								</li>
							</ul>
							
						<div id="header-container-0" class="menu-container">
								<div class="navbar-nav-container">
									<ul class="nav navbar-nav">
										<li>
												<button onclick="window.location.href=&#39;https://www.xilinx.com/applications.html&#39;;">Solutions</button>
												</li>
										<li>
												<button onclick="window.location.href=&#39;https://www.xilinx.com/products/silicon-devices.html&#39;;">Products</button>
												</li>
										<li>
												<button onclick="window.location.href=&#39;https://www.xilinx.com/about/company-overview.html&#39;;">Company</button>
												</li>
										</ul>
									<button data-function="close-menu">
										<span class="fal fa-times" aria-hidden="true"></span>
									</button>
								</div>
							</div>
							<div id="header-container-1" class="menu-container">
								<div class="navbar-nav-container">
									<ul class="nav navbar-nav">
										<li>
												<button onclick="window.location.href=&#39;https://www.xilinx.com/applications.html&#39;;">Solutions</button>
												</li>
										<li>
												<button onclick="window.location.href=&#39;https://www.xilinx.com/products/silicon-devices.html&#39;;">Products</button>
												</li>
										<li>
												<button onclick="window.location.href=&#39;https://www.xilinx.com/about/company-overview.html&#39;;">Company</button>
												</li>
										</ul>
									<button data-function="close-menu">
										<span class="fal fa-times" aria-hidden="true"></span>
									</button>
								</div>
							</div>
							<div id="header-container-2" class="menu-container">
								<div class="navbar-nav-container">
									<ul class="nav navbar-nav">
										<li>
												<button onclick="window.location.href=&#39;https://www.xilinx.com/applications.html&#39;;">Solutions</button>
												</li>
										<li>
												<button onclick="window.location.href=&#39;https://www.xilinx.com/products/silicon-devices.html&#39;;">Products</button>
												</li>
										<li>
												<button onclick="window.location.href=&#39;https://www.xilinx.com/about/company-overview.html&#39;;">Company</button>
												</li>
										</ul>
									<button data-function="close-menu">
										<span class="fal fa-times" aria-hidden="true"></span>
									</button>
								</div>
							</div>
							</div>
					<div class="logo-column col-xs-4 col-sm-2">
						<div class="logo">
							<a target="_blank" href="https://www.xilinx.com/">
								<img src="https://github.com/Xilinx/Image-Collateral/blob/main/xilinx-header-logo.svg?raw=true" title="Xilinx Inc"/>
							</a>
						</div>
					</div>

				</div>
			</div>
			</nav></header></noindex></div>
		
	
</div>

    
</div>
</div>

<div class="calloutBanner parbase aem-GridColumn--default--none aem-GridColumn aem-GridColumn--offset--default--0 aem-GridColumn--default--16"><div class="callout-banner">
    Xilinx is now a part of <a target="_blank" href="https://www.amd.com/en/corporate/xilinx-acquisition">AMD</a> |  <a target="_blank" href="https://www.amd.com/en/corporate/privacy">Learn More</a>
</div>
</div>
				<div class="parsys aem-GridColumn--xxxlarge--none aem-GridColumn--xlarge--none aem-GridColumn--xxlarge--none aem-GridColumn--default--none aem-GridColumn--offset--large--1 aem-GridColumn--xlarge--12 aem-GridColumn--offset--default--0 aem-GridColumn--xxlarge--10 aem-GridColumn--offset--xlarge--2 aem-GridColumn--offset--xxlarge--3 aem-GridColumn--offset--xxxlarge--4 aem-GridColumn--large--none aem-GridColumn aem-GridColumn--large--14 aem-GridColumn--xxxlarge--8 aem-GridColumn--default--16">
						<div class="container-fluid">
							<div class="row">
							<div class="col-xs-12">
   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home" alt="Documentation Home"> Satellite Controller
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

      
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
            
            
            
              
            
            
              <p class="caption" role="heading"><span class="caption-text">Introduction</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="oob-intro.html">Introduction</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Alveo FRU</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="alveo-fru.html">Alveo™ FRU Support</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Standard I2C/SMBus commands</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="std-smbus-commands.html">I2C/SMBus Commands</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">SC firwmare update via OoB</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="sc-firmware-update.html">Satellite Controller Firmware Update Commands</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">FPGA firwmare update via OoB</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">FPGA Flash Update Commands</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#x40-fpga-reset-device">0x40 - FPGA_RESET_DEVICE</a></li>
<li class="toctree-l2"><a class="reference internal" href="#x41-fpga-get-fw-ver">0x41 - FPGA_GET_FW_VER</a></li>
<li class="toctree-l2"><a class="reference internal" href="#x42-fpga-set-update-device">0x42 - FPGA_SET_UPDATE_DEVICE</a></li>
<li class="toctree-l2"><a class="reference internal" href="#x43-fpga-set-boot-device">0x43 - FPGA_SET_BOOT_DEVICE</a></li>
<li class="toctree-l2"><a class="reference internal" href="#x44-fpga-sc-set-write-enable">0x44 - FPGA_SC_SET_WRITE_ENABLE</a></li>
<li class="toctree-l2"><a class="reference internal" href="#x45-flash-set-write-enable">0x45 - FLASH_SET_WRITE_ENABLE</a></li>
<li class="toctree-l2"><a class="reference internal" href="#x46-flash-get-write-protect-states">0x46 - FLASH_GET_WRITE_PROTECT_STATES</a></li>
<li class="toctree-l2"><a class="reference internal" href="#x47-flash-rx-data-block">0x47 - FLASH_RX_DATA_BLOCK</a></li>
<li class="toctree-l2"><a class="reference internal" href="#x48-flash-block-crc-check">0x48 - FLASH_BLOCK_CRC_CHECK</a></li>
<li class="toctree-l2"><a class="reference internal" href="#x49-flash-sector-set-seq-num">0x49 - FLASH_SECTOR_SET_SEQ_NUM</a></li>
<li class="toctree-l2"><a class="reference internal" href="#x4a-flash-copy-firmware">0x4A - FLASH_COPY_FIRMWARE</a></li>
<li class="toctree-l2"><a class="reference internal" href="#x4b-fpga-get-firmware-status">0x4B - FPGA_GET_FIRMWARE_STATUS</a></li>
<li class="toctree-l2"><a class="reference internal" href="#x4c-fpga-set-key-nonce">0x4C - FPGA_SET_KEY_NONCE</a></li>
<li class="toctree-l2"><a class="reference internal" href="#x4d-fpga-calc-mac">0x4D - FPGA_CALC_MAC</a></li>
<li class="toctree-l2"><a class="reference internal" href="#x4e-fpga-verify-mac">0x4E - FPGA_VERIFY_MAC</a></li>
<li class="toctree-l2"><a class="reference internal" href="#x4f-fpga-get-mac-status">0x4F - FPGA_GET_MAC_STATUS</a></li>
<li class="toctree-l2"><a class="reference internal" href="#x50-fpga-set-image-size">0x50 - FPGA_SET_IMAGE_SIZE</a></li>
<li class="toctree-l2"><a class="reference internal" href="#x51-notify-wp-to-fpga">0x51 - NOTIFY_WP_TO_FPGA</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">DMTF support</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="dmtf-support.html">DMTF Implementation</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Appendix A: PCIe and thermal information</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="appendix_a.html">Appendix A</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Appendix B: SMBus 2.0 protocol recap</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="smbus2.0-protocol-recap.html">I2C/SMBus Implementation and Protocol Recap</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">References</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="references.html">Additional Resources</a></li>
</ul>

            
			
			<p class="caption"><span class="caption-text">This Page</span></p>
				<ul class="current">
				  <li class="toctree-l1"><a href="_sources/fpga-firmware-update.rst.txt"
						rel="nofollow">Show Source</a></li>
				</ul>
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Satellite Controller</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>FPGA Flash Update Commands</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/fpga-firmware-update.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <section id="fpga-flash-update-commands">
<h1>FPGA Flash Update Commands<a class="headerlink" href="#fpga-flash-update-commands" title="Permalink to this headline">¶</a></h1>
<blockquote>
<div><p>In the Alveo™ U30, the satellite controller supports an out-of-band method of QSPI flash image upgrade. QSPI flash is where FPGA image is stored. Server BMC is expected to initiate and perform the upgrade process by sending the I2C commands to the satellite controller firmware.</p>
<p><strong>*Note*:</strong> The satellite controller will perform I2C clock-stretching, wherever applicable, to perform the requested actions.</p>
<p><strong>*Note*:</strong> The satellite controller firmware only supports 700 kHz mode on the SMBus (used for the FPGA FW update), therefore the upgrade process could take an extended amount of time. SMBus speed of 1MHz is currently untested and unsupported.</p>
<p>The table below lists the commands supported/needed for QSPI flash upgrade. The following commands are currently supported only for Alveo U30</p>
</div></blockquote>
<ol class="arabic simple">
<li><p>FPGA_GET_FW_VER</p></li>
<li><p>FLASH_COPY_FIRMWARE</p></li>
<li><p>FPGA_SET_KEY_NONCE</p></li>
<li><p>FPGA_CALC_MAC</p></li>
<li><p>FPGA_VERIFY_MAC</p></li>
<li><p>FPGA_GET_MAC_STATUS</p></li>
</ol>
<p><em>Table:</em> <strong>FPGA Flash Upgrade Commands</strong></p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p><strong>SI NO</strong></p></th>
<th class="head"><p><strong>Command</strong></p></th>
<th class="head"><p><strong>Command Description</strong></p></th>
<th class="head"><p><strong>Server BMC Action</strong></p></th>
<th class="head"><p><strong>SC Action</strong></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>1</p></td>
<td><p>0x40</p></td>
<td><p>FPGA_RESET_DEVICE</p></td>
<td><p>B0 from BMC:</p>
<p>0x01: FPGA devices</p>
<p>0x02: SC FW</p>
</td>
<td><p>See table ‘Flash Operation</p>
<p>Return Codes’ for SC’s</p>
<p>response</p>
</td>
</tr>
<tr class="row-odd"><td><p>2</p></td>
<td><p>0x41</p></td>
<td><p>FPGA_GET_FW_VER</p></td>
<td><p>B0 from BMC:</p>
<p>0x01: FPGA1 Primary</p>
<p>0x02: FPGA1 Recovery</p>
<p>0x03: FPGA2 Primary (if present)</p>
<p>0x04: FPGA2 Recovery(if present)</p>
</td>
<td><p>B0 – Valid Byte</p>
<p>B1 - Minor revision</p>
<p>B2 - Major revision</p>
</td>
</tr>
<tr class="row-even"><td><p>3</p></td>
<td><p>0x42</p></td>
<td><p>FPGA_SET_UPDATE_DEVICE</p></td>
<td><p>B0 from BMC</p>
<p>0x01: FPGA1 Primary</p>
<p>0x02: FPGA1 Recovery</p>
<p>0x03: FPGA2 Primary (if present)</p>
<p>0x04: FPGA2 Recovery(if present)</p>
</td>
<td><p>See table ‘Flash Operation</p>
<p>Return Codes’ for SC’s</p>
<p>response</p>
</td>
</tr>
<tr class="row-odd"><td><p>4</p></td>
<td><p>0x43</p></td>
<td><p>FPGA_SET_BOOT_DEVICE</p></td>
<td><p>B0 from BMC:</p>
<p>0x01: FPGA1 Primary</p>
<p>0x02: FPGA1 Recovery</p>
<p>0x03: FPGA2 Primary (if present)</p>
<p>0x04: FPGA2 Recovery(if present)</p>
</td>
<td><p>See table ‘Flash Operation</p>
<p>Return Codes’ for SC’s</p>
<p>response</p>
</td>
</tr>
<tr class="row-even"><td><p>5</p></td>
<td><p>0x44</p></td>
<td><p>FPGA_SC_SET_WRITE</p>
<p>_ENABLE</p>
<p>Provides control to SC</p>
<p>over WP# pins and enables</p>
<p>SC to access QSPI flash</p>
</td>
<td><p>B0 from BMC:</p>
<p>0x01: FPGA1 Primary</p>
<p>0x02: FPGA1 Recovery</p>
<p>0x03: FPGA2 Primary (if present)</p>
<p>0x04: FPGA2 Recovery(if present)</p>
<p>B1 from BMC:</p>
<p>0x01: WP enable</p>
<p>0x02: WP disable</p>
</td>
<td><p>See table ‘Flash Operation</p>
<p>Return Codes’ for SC’s</p>
<p>response</p>
</td>
</tr>
<tr class="row-odd"><td><p>6</p></td>
<td><p>0x45</p></td>
<td><p>FLASH_SET_WRITE_ENABLE</p>
<p>Provides control to SC</p>
<p>over WP# pins and enables</p>
<p>FPGA to access QSPI flash</p>
</td>
<td><p>B0 from BMC:</p>
<p>0x01: FPGA1 Primary</p>
<p>0x02: FPGA1 Recovery</p>
<p>0x03: FPGA2 Primary (if present)</p>
<p>0x04: FPGA2 Recovery(if present)</p>
<p>B1 from BMC:</p>
<p>0x01: WP enable</p>
<p>0x02: WP disable</p>
</td>
<td><p>See table ‘Flash Operation</p>
<p>Return Codes’ for SC’s</p>
<p>response</p>
</td>
</tr>
<tr class="row-even"><td><p>7</p></td>
<td><p>0x46</p></td>
<td><p>FLASH_GET_WRITE</p>
<p>_PROTECT_STATES</p>
</td>
<td><p>B0 from BMC:</p>
<p>0x01: FPGA1 Primary</p>
<p>0x02: FPGA1 Recovery</p>
<p>0x03: FPGA2 Primary (if present)</p>
<p>0x04: FPGA2 Recovery(if present)</p>
<p>B1 from BMC:</p>
<p>0x01: WP enable</p>
<p>0x02: WP disable</p>
</td>
<td><p>Byte 0: SC WP Status</p>
<p>0x01: WP enabled</p>
<p>0x02: WP disabled</p>
<p>Byte 1: FPGA WP Status</p>
<p>0x01: WP enabled</p>
<p>0x02: WP disabled</p>
</td>
</tr>
<tr class="row-odd"><td><p>8</p></td>
<td><p>0x47</p></td>
<td><p>FLASH_RX_DATA_BLOCK</p>
<p>SC accumulates 252 bytes</p>
<p>from each transaction to</p>
<p>form 64KB sector &amp; writes</p>
<p>it into QSPI flash</p>
</td>
<td><p>BMC sends data bytes</p>
<p>D0…D251</p>
</td>
<td><p>N/A</p></td>
</tr>
<tr class="row-even"><td><p>9</p></td>
<td><p>0x48</p></td>
<td><p>FLASH_BLOCK_CRC_CHECK</p>
<p>SC compares CRC, writes 1</p>
<p>sector to flash, rechecks</p>
<p>CRC with FPGA device</p>
</td>
<td><p>BMC sends 8 byte CRC</p>
<p>B1, B2 … B8</p>
</td>
<td><p>See table ‘Flash Operation</p>
<p>Return Codes’ for SC’s</p>
<p>response</p>
</td>
</tr>
<tr class="row-odd"><td><p>10</p></td>
<td><p>0x49</p></td>
<td><p>FLASH_SECTOR_SET_SEQ</p>
<p>_NUM</p>
</td>
<td><p>B0: Sector number (low byte)</p>
<p>B0: Sector number (high byte)</p>
</td>
<td><p>See table ‘Flash Operation</p>
<p>Return Codes’ for SC’s</p>
<p>response</p>
</td>
</tr>
<tr class="row-even"><td><p>11</p></td>
<td><p>0x4A</p></td>
<td><p>FLASH_COPY_FIRMWARE</p></td>
<td><p>B0: Source flash device</p>
<p>0x01: FPGA1 Primary</p>
<p>0x02: FPGA1 Recovery</p>
<p>0x03: FPGA2 Primary (if present)</p>
<p>0x04: FPGA2 Recovery(if present)</p>
<p>B0: Destination flash device</p>
<p>0x01: FPGA1 Primary</p>
<p>0x02: FPGA1 Recovery</p>
<p>0x03: FPGA2 Primary (if present)</p>
<p>0x04: FPGA2 Recovery(if present)</p>
</td>
<td><p>See table ‘Flash Operation</p>
<p>Return Codes’ for SC’s</p>
<p>response</p>
</td>
</tr>
<tr class="row-odd"><td><p>12</p></td>
<td><p>0x4B</p></td>
<td><p>FPGA_GET_FIRMWARE</p>
<p>_STATUS</p>
</td>
<td><p>N/A</p></td>
<td><p>See table ‘Flash Operation</p>
<p>Return Codes’ for SC’s</p>
<p>response</p>
</td>
</tr>
<tr class="row-even"><td><p>13</p></td>
<td><p>0x4C</p></td>
<td><p>FPGA_SET_KEY_NONCE</p>
<p>BMC sends key and nonce</p>
<p>that’s randomly generated.</p>
<p>SC stores both in internal</p>
<p>flash (Non-volatile)</p>
</td>
<td><p>B0 from BMC:</p>
<p>0x01: FPGA1 Primary</p>
<p>0x02: FPGA1 Recovery</p>
<p>0x03: FPGA2 Primary (if present)</p>
<p>0x04: FPGA2 Recovery(if present)</p>
<p>B1 - B16: Key</p>
<p>B17 – B28: Nonce</p>
</td>
<td><p>See table ‘Flash Operation</p>
<p>Return Codes’ for SC’s</p>
<p>response</p>
</td>
</tr>
<tr class="row-odd"><td><p>14</p></td>
<td><p>0x4D</p></td>
<td><p>FPGA_CALC_MAC</p>
<p>SC increments nonce by 1,</p>
<p>calculates hash using the</p>
<p>existing key &amp; new nonce,</p>
<p>and stores MAC/hash value</p>
<p>in SC’s internal flash</p>
</td>
<td><p>B0 from BMC:</p>
<p>0x01: FPGA1 Primary</p>
<p>0x02: FPGA1 Recovery</p>
<p>0x03: FPGA2 Primary (if present)</p>
<p>0x04: FPGA2 Recovery(if present)</p>
</td>
<td><p>See table ‘Flash Operation</p>
<p>Return Codes’ for SC’s</p>
<p>response</p>
</td>
</tr>
<tr class="row-even"><td><p>15</p></td>
<td><p>0x4E</p></td>
<td><p>FPGA_VERIFY_MAC</p>
<p>SC calculates hash using</p>
<p>existing key &amp; nonce, and</p>
<p>stores MAC/hash value in</p>
<p>SC’s internal flash</p>
</td>
<td><p>B0 from BMC:</p>
<p>0x01: FPGA1 Primary</p>
<p>0x02: FPGA1 Recovery</p>
<p>0x03: FPGA2 Primary (if present)</p>
<p>0x04: FPGA2 Recovery(if present)</p>
</td>
<td><p>See table ‘Flash Operation</p>
<p>Return Codes’ for SC’s</p>
<p>response</p>
</td>
</tr>
<tr class="row-odd"><td><p>16</p></td>
<td><p>0x4F</p></td>
<td><p>FPGA_GET_MAC_STATUS</p>
<p>SC responds with status of</p>
<p>MAC/has calculation or</p>
<p>verification along with</p>
<p>the 16-byte MAC value</p>
</td>
<td><p>B0 from BMC:</p>
<p>0x01: FPGA1 Primary</p>
<p>0x02: FPGA1 Recovery</p>
<p>0x03: FPGA2 Primary (if present)</p>
<p>0x04: FPGA2 Recovery(if present)</p>
<p>B1 from BMC:</p>
<p>0x01: Get CALC_MAC status</p>
<p>0x02: Get VERIFY_MAC status</p>
</td>
<td><p>Byte B0 from SC:</p>
<p>See table ‘Flash Operation</p>
<p>Return Codes’ for</p>
<p>response</p>
<p>Bytes B1 - B16 from SC:</p>
<p>16 byte MAC/hash value</p>
</td>
</tr>
<tr class="row-even"><td><p>17</p></td>
<td><p>0x50</p></td>
<td><p>FPGA_SET_IMAGE_SIZE</p></td>
<td><p>B0 from BMC:</p>
<p>0x01: FPGA1 Primary</p>
<p>0x02: FPGA1 Recovery</p>
<p>0x03: FPGA2 Primary (if present)</p>
<p>0x04: FPGA2 Recovery(if present)</p>
<p>B1 - B5 from BMC:</p>
<p>Size of QSPI image in bytes</p>
</td>
<td><p>N/A</p></td>
</tr>
<tr class="row-odd"><td><p>18</p></td>
<td><p>0x51</p></td>
<td><p>NOTIFY_WP_TO_FPGA</p></td>
<td><p>B0 from BMC:</p>
<p>0x01: FPGA1 Primary</p>
<p>0x02: FPGA1 Recovery</p>
<p>0x03: FPGA2 Primary (if present)</p>
<p>0x04: FPGA2 Recovery(if present)</p>
</td>
<td><p>Byte B0 from SC:</p>
<p>0x01: Operation Success</p>
<p>0x02: Operation failure</p>
</td>
</tr>
</tbody>
</table>
<p><em>Table:</em> <strong>Flash Operation Return Codes</strong></p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p><strong>Response Code</strong></p></th>
<th class="head"><p><strong>Description</strong></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>0x00</p></td>
<td><p>Reserved</p></td>
</tr>
<tr class="row-odd"><td><p>0x01</p></td>
<td><p>Operation success</p></td>
</tr>
<tr class="row-even"><td><p>0x02</p></td>
<td><p>Operation failed</p></td>
</tr>
<tr class="row-odd"><td><p>0x03</p></td>
<td><p>Operation Not Supported</p></td>
</tr>
<tr class="row-even"><td><p>0x04</p></td>
<td><p>Flash erase failed. Abort operation, rectify error and re-initiate from start</p></td>
</tr>
<tr class="row-odd"><td><p>0x05</p></td>
<td><p>Flash write failed. Abort operation, rectify error and re-initiate from start</p></td>
</tr>
<tr class="row-even"><td><p>0x06</p></td>
<td><p>Flash read failed. Abort operation, rectify error and re-initiate from start</p></td>
</tr>
<tr class="row-odd"><td><p>0x07</p></td>
<td><p>Flash CRC failed. Abort operation, rectify error and re-initiate from start</p></td>
</tr>
<tr class="row-even"><td><p>0x08</p></td>
<td><p>Invalid Selection</p></td>
</tr>
<tr class="row-odd"><td><p>0x09</p></td>
<td><p>FPGA_GENERAL_ERROR</p></td>
</tr>
<tr class="row-even"><td><p>0x0A</p></td>
<td><p>FPGA_MAC_CALCULATION_INVALID</p></td>
</tr>
<tr class="row-odd"><td><p>0x0B</p></td>
<td><p>FPGA_INVALID_IMAGE_LENGTH</p></td>
</tr>
<tr class="row-even"><td><p>0x0C</p></td>
<td><p>QSPI SC disable WP failed. Abort operation, rectify error and re-initiate from start</p></td>
</tr>
<tr class="row-odd"><td><p>0x0D</p></td>
<td><p>QSPI wrong MCS file format. Abort operation, rectify error and re-initiate from start</p></td>
</tr>
<tr class="row-even"><td><p>0x0E</p></td>
<td><p>Set the KEY and/or NONCE before proceeding for MAC Calculation</p></td>
</tr>
<tr class="row-odd"><td><p>0x0F</p></td>
<td><p>MAC calculation not performed. Please send command 0x4D before MAC verify</p></td>
</tr>
<tr class="row-even"><td><p>0x10</p></td>
<td><p>FLASH_RX_DATA_BLOCK command in-progress</p></td>
</tr>
<tr class="row-odd"><td><p>0x11</p></td>
<td><p>FPGA1 primary flash update in-progress</p></td>
</tr>
<tr class="row-even"><td><p>0x12</p></td>
<td><p>FPGA1 recovery flash update in-progress</p></td>
</tr>
<tr class="row-odd"><td><p>0x13</p></td>
<td><p>FPGA2 primary flash update in-progress</p></td>
</tr>
<tr class="row-even"><td><p>0x14</p></td>
<td><p>FPGA2 recovery flash update in-progress</p></td>
</tr>
<tr class="row-odd"><td><p>0x15–0x1F</p></td>
<td><p>Reserved</p></td>
</tr>
<tr class="row-even"><td><p>0x20</p></td>
<td><p>FLASH_BLOCK_CRC_CHECK command in-progress</p></td>
</tr>
<tr class="row-odd"><td><p>0x21</p></td>
<td><p>FPGA_CRC_CHECK_STATUS_IN_PROGRESS</p></td>
</tr>
<tr class="row-even"><td><p>0x22</p></td>
<td><p>QSPI_SET_UPDATE_DEVICE_NOT_SENT (send command 0x42)</p></td>
</tr>
<tr class="row-odd"><td><p>0x23</p></td>
<td><p>QSPI_SC_SET_WRITE_NOT_ENABLED (send command 0x44)</p></td>
</tr>
<tr class="row-even"><td><p>0x24–0x2F</p></td>
<td><p>Reserved</p></td>
</tr>
<tr class="row-odd"><td><p>0x30</p></td>
<td><p>FLASH_COPY_FIRMWARE command in-progress</p></td>
</tr>
<tr class="row-even"><td><p>0x31</p></td>
<td><p>FPGA1 primary to FPGA1 recovery flash copy in-progress</p></td>
</tr>
<tr class="row-odd"><td><p>0x32</p></td>
<td><p>FPGA1 primary to FPGA2 primary flash copy in-progress</p></td>
</tr>
<tr class="row-even"><td><p>0x33</p></td>
<td><p>FPGA1 primary to FPGA2 recovery flash copy in-progress</p></td>
</tr>
<tr class="row-odd"><td><p>0x34</p></td>
<td><p>FPGA1 recovery to FPGA1 primary flash copy in-progress</p></td>
</tr>
<tr class="row-even"><td><p>0x35</p></td>
<td><p>FPGA1 recovery to FPGA2 primary flash copy in-progress</p></td>
</tr>
<tr class="row-odd"><td><p>0x36</p></td>
<td><p>FPGA1 recovery to FPGA2 recovery flash copy in-progress</p></td>
</tr>
<tr class="row-even"><td><p>0x37</p></td>
<td><p>FPGA2 primary to FPGA1 primary flash copy in-progress</p></td>
</tr>
<tr class="row-odd"><td><p>0x38</p></td>
<td><p>FPGA2 primary to FPGA1 recovery flash copy in-progress</p></td>
</tr>
<tr class="row-even"><td><p>0x39</p></td>
<td><p>FPGA2 primary to FPGA2 recovery flash copy in-progress</p></td>
</tr>
<tr class="row-odd"><td><p>0x3A</p></td>
<td><p>FPGA2 recovery to FPGA1 primary flash copy in-progress</p></td>
</tr>
<tr class="row-even"><td><p>0x3B</p></td>
<td><p>FPGA2 recovery to FPGA1 recovery flash copy in-progress</p></td>
</tr>
<tr class="row-odd"><td><p>0x3C</p></td>
<td><p>FPGA2 recovery to FPGA2 primary flash copy in-progress</p></td>
</tr>
<tr class="row-even"><td><p>0x3D–0x3F</p></td>
<td><p>Reserved</p></td>
</tr>
<tr class="row-odd"><td><p>0x40</p></td>
<td><p>FPGA_CALC_MAC command in-progress</p></td>
</tr>
<tr class="row-even"><td><p>0x41</p></td>
<td><p>FPGA1 primary MAC calculation in-progress</p></td>
</tr>
<tr class="row-odd"><td><p>0x42</p></td>
<td><p>FPGA1 recovery MAC calculation in-progress</p></td>
</tr>
<tr class="row-even"><td><p>0x43</p></td>
<td><p>FPGA2 primary MAC calculation in-progress</p></td>
</tr>
<tr class="row-odd"><td><p>0x44</p></td>
<td><p>FPGA2 recovery MAC calculation in-progress</p></td>
</tr>
<tr class="row-even"><td><p>0x45–0x4F</p></td>
<td><p>Reserved</p></td>
</tr>
<tr class="row-odd"><td><p>0x50</p></td>
<td><p>FPGA_VERIFY_MAC command in-progress</p></td>
</tr>
<tr class="row-even"><td><p>0x51</p></td>
<td><p>FPGA1 primary MAC verification in-progress</p></td>
</tr>
<tr class="row-odd"><td><p>0x52</p></td>
<td><p>FPGA1 recovery MAC verification in-progress</p></td>
</tr>
<tr class="row-even"><td><p>0x53</p></td>
<td><p>FPGA2 primary MAC verification in-progress</p></td>
</tr>
<tr class="row-odd"><td><p>0x54</p></td>
<td><p>FPGA2 recovery MAC verification in-progress</p></td>
</tr>
<tr class="row-even"><td><p>0x55–0xEF</p></td>
<td><p>Reserved</p></td>
</tr>
<tr class="row-odd"><td><p>0xFF</p></td>
<td><p>FPGA_NO_OPERATION</p></td>
</tr>
</tbody>
</table>
<section id="x40-fpga-reset-device">
<h2>0x40 - FPGA_RESET_DEVICE<a class="headerlink" href="#x40-fpga-reset-device" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>The BMC can send the FPGA_RESET_DEVICE command to reset FPGA
device(s) or SC FW. For SC reset (warm reset), the satellite
controller firmware responds with the status and reboots itself. In
the Alveo U30 the reset command will reset both the FPGA devices
(ZYNQ1 and ZYNQ2), due to an existing HW limitation.</p>
</div></blockquote>
<p><em>Table:</em> <strong>FPGA_RESET_DEVICE Server BMC Request</strong></p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head" colspan="2"><p><strong>Server BMC Request</strong></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Command code</p></td>
<td><p>0x40</p></td>
</tr>
<tr class="row-odd"><td><p>Byte0</p></td>
<td><p>0x01: FPGA devices</p>
<p>0x02: SC FW</p>
</td>
</tr>
</tbody>
</table>
<p><em>Table:</em> <strong>FPGA_RESET_DEVICE Xilinx Alveo Card Response</strong></p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head" colspan="3"><p><strong>Xilinx Alveo Card Response</strong></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Data bytes</p></td>
<td><p>B0</p></td>
<td><p>See table ‘Flash Operation Return Codes’ for SC’s response</p></td>
</tr>
</tbody>
</table>
</section>
<section id="x41-fpga-get-fw-ver">
<h2>0x41 - FPGA_GET_FW_VER<a class="headerlink" href="#x41-fpga-get-fw-ver" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>The BMC sends this command to fetch the FW version running in either FPGA1 or FPGA2 device. This command is currently supported only in the Alveo U30 data accelerator card. The byte 0 (validity byte) in response from SC must be read first.</p>
</div></blockquote>
<p><em>Table:</em> <strong>FPGA_GET_FW_VER Server BMC Request</strong></p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head" colspan="2"><p><strong>Server BMC Request</strong></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Command code</p></td>
<td><p>0x41</p></td>
</tr>
<tr class="row-odd"><td><p>Byte0</p></td>
<td><p>0x01: FPGA1 primary flash device</p>
<p>0x02: FPGA1 recovery flash device</p>
<p>0x03: FPGA2 primary flash device (if present)</p>
<p>0x04: FPGA2 recovery flash device (if present)</p>
</td>
</tr>
</tbody>
</table>
<p><em>Table:</em> <strong>FPGA_GET_FW_VER Xilinx Alveo Card Response</strong></p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head" colspan="3"><p><strong>Xilinx Alveo Card Response</strong></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Data bytes</p></td>
<td><p>B0</p>
<p>B1, B2</p>
</td>
<td><p>B0 - Valid Byte</p>
<p>0x00 - Not supported (B1, B2 - Invalid)</p>
<p>0x01 - Unknown or Reduced Service</p>
<p>0x02 - reserved</p>
<p>0x03 - No error; Valid B1 &amp; B2 bytes</p>
<p>B1 – Minor version; B2 – Major version</p>
</td>
</tr>
</tbody>
</table>
</section>
<section id="x42-fpga-set-update-device">
<h2>0x42 - FPGA_SET_UPDATE_DEVICE<a class="headerlink" href="#x42-fpga-set-update-device" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>BMC sends the FPGA_SET_UPDATE_DEVICE command to select the flash
device to initiate the FW upgrade.</p>
</div></blockquote>
<p><em>Table:</em> <strong>FPGA_SET_UPDATE_DEVICE Server BMC Request</strong></p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head" colspan="2"><p><strong>Server BMC Request</strong></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Command code</p></td>
<td><p>0x42</p></td>
</tr>
<tr class="row-odd"><td><p>Byte0</p></td>
<td><p>0x01: FPGA1 primary flash device</p>
<p>0x02: FPGA1 recovery flash device</p>
<p>0x03: FPGA2 primary flash device (if present)</p>
<p>0x04: FPGA2 recovery flash device (if present)</p>
</td>
</tr>
</tbody>
</table>
<p><em>Table:</em> <strong>FPGA_SET_UPDATE_DEVICE Xilinx Alveo Card Response</strong></p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head" colspan="3"><p><strong>Xilinx Alveo Card Response</strong></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Data bytes</p></td>
<td><p>B0</p></td>
<td><p>See table ‘Flash Operation Return Codes’ for SC’s response</p></td>
</tr>
</tbody>
</table>
</section>
<section id="x43-fpga-set-boot-device">
<h2>0x43 - FPGA_SET_BOOT_DEVICE<a class="headerlink" href="#x43-fpga-set-boot-device" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>The BMC sends the FPGA_SET_BOOT_DEVICE command to set the boot
device. The SC FW stores this information in the internal flash memory and
restores the configuration in case of server cool boot or power cycle.</p>
<p><strong>*Note*:</strong> Primary flash device is selected as the boot
device/default configuration in FPGA1 (and FPGA2 if present).</p>
</div></blockquote>
<p><em>Table:</em> <strong>FPGA_SET_BOOT_DEVICE Server BMC Request</strong></p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head" colspan="2"><p><strong>Server BMC Request</strong></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Command code</p></td>
<td><p>0x43</p></td>
</tr>
<tr class="row-odd"><td><p>Byte0</p></td>
<td><p>0x01– FPGA1 primary flash device</p>
<p>0x02– FPGA1 recovery flash device</p>
<p>0x03– FPGA2 primary flash device (if present)</p>
<p>0x04– FPGA2 recovery flash device (if present)</p>
</td>
</tr>
</tbody>
</table>
<p><em>Table:</em> <strong>FPGA_SET_BOOT_DEVICE Xilinx Alveo Card Response</strong></p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head" colspan="3"><p><strong>Xilinx Alveo Card Response</strong></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Data bytes</p></td>
<td><p>Byte0</p></td>
<td><p>0x01– Request success</p>
<p>0x02– Request failed</p>
</td>
</tr>
</tbody>
</table>
</section>
<section id="x44-fpga-sc-set-write-enable">
<h2>0x44 - FPGA_SC_SET_WRITE_ENABLE<a class="headerlink" href="#x44-fpga-sc-set-write-enable" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>The BMC sends the FPGA_SC_SET_WRITE_ENABLE command to enable/disable write protect for SPI mode from the SC. This command must follow FPGA_SET_UPDATE_DEVICE. When the SC has write protect mode enabled, only the SC has the access to QSPI flash. SC can read/ write into the flash via SPI (x1 mode).</p>
<p>For hyperscaler customers, by default, write protect from the satellite controller is enabled. For OEM customers, default mode will be set as WP# disabled and the SC doesn’t have the access to flash device. The SC FW configures this mode based on the FRU parameters written into its EEPROM.</p>
<p><strong>*Note*:</strong> The SC will not store this configuration (from command 0x44)  in any persistence memory. A SC reboot or device power cycle results in loss of configuration. During the subsequent boot-up, the SC will restore the default configuration.</p>
</div></blockquote>
<p><em>Table:</em> <strong>FPGA_SC_SET_WRITE_ENABLE Server BMC Request</strong></p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head" colspan="2"><p><strong>Server BMC Request</strong></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Command code</p></td>
<td><p>0x44</p></td>
</tr>
<tr class="row-odd"><td><p>Byte0</p></td>
<td><p>0x01: FPGA1 primary flash device</p>
<p>0x02: FPGA1 recovery flash device</p>
<p>0x03: FPGA2 primary flash device (if present)</p>
<p>0x04: FPGA2 recovery flash device (if present)</p>
</td>
</tr>
<tr class="row-even"><td><p>Byte1</p></td>
<td><p>0x01: WP enable</p>
<p>0x02: WP disable</p>
</td>
</tr>
</tbody>
</table>
<p><em>Table:</em> <strong>FPGA_SC_SET_WRITE_ENABLE Xilinx Alveo Card Response</strong></p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head" colspan="3"><p><strong>Xilinx Alveo Card Response</strong></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Data bytes</p></td>
<td><p>B0</p></td>
<td><p>See table ‘Flash Operation Return Codes’ for SC’s response</p></td>
</tr>
</tbody>
</table>
</section>
<section id="x45-flash-set-write-enable">
<h2>0x45 - FLASH_SET_WRITE_ENABLE<a class="headerlink" href="#x45-flash-set-write-enable" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>The BMC can send the FLASH_SET_WRITE_ENABLE command to enable/disable write protect the QSPI flash device in either ZYNQ
device. This command must follow FPGA_SC_SET_WRITE_ENABLE for any FPGA flash FW upgrade.</p>
<p>For Hyperscaler customers, by default, the FPGA flash devices are write protected and can only run in x2 SPI mode as a preferred/secured mode.</p>
<blockquote>
<div><p>When write protect is disabled, the QSPI flash device can be accessed in x1, x2, or x4 SPI Mode and FPGA has the write access to the QSPI devices. This is the default mode configured for OEM customers. SC FW configures this mode based on FRU parameters written into its EEPROM.</p>
</div></blockquote>
<p><strong>*Note*:</strong> The SC will not store this configuration (from command 0x45) in any persistence memory. A SC reboot or device power cycle results in the loss of configuration. During the subsequent boot-up, the SC will restore the default configuration.</p>
</div></blockquote>
<p><em>Table:</em> <strong>FLASH_SET_WRITE_ENABLE Server BMC Request</strong></p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head" colspan="2"><p><strong>Server BMC Request</strong></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Command code</p></td>
<td><p>0x45</p></td>
</tr>
<tr class="row-odd"><td><p>Byte0</p></td>
<td><p>0x01: FPGA1 primary flash device</p>
<p>0x02: FPGA1 recovery flash device</p>
<p>0x03: FPGA2 primary flash device (if present)</p>
<p>0x04: FPGA2 recovery flash device (if present)</p>
</td>
</tr>
<tr class="row-even"><td><p>Byte1</p></td>
<td><p>0x01: WP enable</p>
<p>0x02: WP disable</p>
</td>
</tr>
</tbody>
</table>
<p><em>Table:</em> <strong>FLASH_SET_WRITE_ENABLE Xilinx Alveo Card Response</strong></p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head" colspan="3"><p><strong>Xilinx Alveo Card Response</strong></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Data bytes</p></td>
<td><p>B0</p></td>
<td><p>See table ‘Flash Operation Return Codes’ for SC’s response</p></td>
</tr>
</tbody>
</table>
</section>
<section id="x46-flash-get-write-protect-states">
<h2>0x46 - FLASH_GET_WRITE_PROTECT_STATES<a class="headerlink" href="#x46-flash-get-write-protect-states" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>The BMC can send the FLASH_GET_WRITE_PROTECT_STATES command to
get the write protect state for all the flash devices.</p>
</div></blockquote>
<p><em>Table:</em> <strong>FLASH_GET_WRITE_PROTECT_STATES Server BMC Request</strong></p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head" colspan="2"><p><strong>Server BMC Request</strong></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Command code</p></td>
<td><p>0x46</p></td>
</tr>
<tr class="row-odd"><td><p>Data bytes</p></td>
<td><p>N/A</p></td>
</tr>
</tbody>
</table>
<p><em>Table:</em> <strong>FLASH_GET_WRITE_PROTECT_STATES Xilinx Alveo Card Response</strong></p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head" colspan="3"><p><strong>Xilinx Alveo Card Response</strong></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Data bytes</p></td>
<td><p>Byte0</p></td>
<td><p>Byte 0: SC WP Status</p>
<p>0x01: WP enabled ; 0x02: WP disabled</p>
</td>
</tr>
<tr class="row-odd"><td></td>
<td><p>Byte 1</p></td>
<td><p>Byte 1: FPGA WP Status</p>
<p>0x01: WP enabled ; 0x02: WP disabled</p>
</td>
</tr>
</tbody>
</table>
</section>
<section id="x47-flash-rx-data-block">
<h2>0x47 - FLASH_RX_DATA_BLOCK<a class="headerlink" href="#x47-flash-rx-data-block" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>The BMC sends data blocks using the FLASH_RX_DATA_BLOCK command. Data (or payload) is the FW for QSPI flash devices. The SC accumulates 252 byte data from each transaction to build up 64 Kbyte blocks and write into QSPI flash. The sector size for QSPI flash is 64 Kbyte and the SC will cache 1 block of data in the internal SRAM before writing it to QSPI. This command must be preceded by the FPGA_SET_UPDATE_DEVICE, FPGA_SC_SET_WRITE_ENABLE, and FLASH_SET_WRITE_ENABLE commands.</p>
<p><strong>*Note*:</strong> The maximum supported size of each I2C transaction is 252 bytes.</p>
</div></blockquote>
<p><em>Table:</em> <strong>FLASH_RX_DATA_BLOCK Server BMC Request</strong></p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head" colspan="2"><p><strong>Server BMC Request</strong></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Command code</p></td>
<td><p>0x47</p></td>
</tr>
<tr class="row-odd"><td><p>Length byte 0</p></td>
<td><p>Total number of bytes in the current I2C transaction (command)</p></td>
</tr>
<tr class="row-even"><td><p>Data bytes</p></td>
<td><p>D1, D2, … D252</p></td>
</tr>
</tbody>
</table>
<p><em>Table:</em> <strong>FLASH_RX_DATA_BLOCK Xilinx Alveo Card Response</strong></p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head" colspan="3"><p><strong>Xilinx Alveo Card Response</strong></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Data bytes</p></td>
<td><p>B0</p></td>
<td><p>See table ‘Flash Operation Return Codes’ for SC’s response</p></td>
</tr>
</tbody>
</table>
</section>
<section id="x48-flash-block-crc-check">
<h2>0x48 - FLASH_BLOCK_CRC_CHECK<a class="headerlink" href="#x48-flash-block-crc-check" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>The BMC sends the FLASH_BLOCK_CRC_CHECK command to check the CRC from the previous block and tracks the number of bytes sent to the SC. After sending 64K bytes, the BMC sends this command to initiate CRC check. The BMC sends 64-bit CRC (data payload and start address of the block) for the previous 64 Kbyte block along with this command request. This command also indicates the completion of the 64 Kbyte block transfer from the BMC to the SC, which immediately
returns the status CRC_CHECK_IN_PROGRESS. This command is a trigger for the SC to start all the flash write and CRC check
operations in the background. The BMC can poll the FPGA_GET_FIRMWARE_STATUS command periodically for completion
status before moving to next sector. See table ‘Flash Operation Return Codes’ for SC’s response</p>
</div></blockquote>
<p><em>Table 97:</em> <strong>FLASH_BLOCK_CRC_CHECK Server BMC Server</strong></p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head" colspan="2"><p><strong>Server BMC Request</strong></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Command code</p></td>
<td><p>0x48</p></td>
</tr>
<tr class="row-odd"><td><p>Data bytes</p></td>
<td><p>D1 … D8</p>
<p>64-bit CRC data</p>
</td>
</tr>
</tbody>
</table>
<p><em>Table:</em> <strong>FLASH_BLOCK_CRC_CHECK Xilinx Alveo Card Response</strong></p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head" colspan="3"><p><strong>Xilinx Alveo Card Response</strong></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Data bytes</p></td>
<td><p>B0</p></td>
<td><p>See table ‘Flash Operation Return Codes’ for SC’s response</p></td>
</tr>
</tbody>
</table>
</section>
<section id="x49-flash-sector-set-seq-num">
<h2>0x49 - FLASH_SECTOR_SET_SEQ_NUM<a class="headerlink" href="#x49-flash-sector-set-seq-num" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>The FPGA flash FW image update needs to be implemented with the retry mechanism in both the server BMC and the Alveo SC.</p>
<p>The BMC sends the FLASH_SECTOR_SET_SEQ_NUM command to set the sequence number (or the sector number) of the sector at which the SC needs to write into the FPGA Flash. This retry mechanism is needed to restart the FPGA FW upgrade process from the point where it was terminated previously. The termination reason could be a reboot of the SC FW, the BMC FW, power loss, or any user triggered event.</p>
<p>When server BMC wants to restart the FPGA FW upgrade process from the middle, the BMC sends a valid 2-byte sequence number. The BMC may keep track of the sequence number and keep updating by 1 for every successful response from the SC for the command FLASH_BLOCK_CRC_CHECK.</p>
<p>The SC will calculate the sector start address based on the sequence number and the fixed start offset (expected to be 0x0) of the FW inside flash. Responsibility is on the BMC to send the correct sequence number and its corresponding payload. Otherwise the SC may write into a non- contiguous flash sector and may end up corrupting the FW.</p>
</div></blockquote>
<p><em>Table:</em> <strong>FLASH_SECTOR_SET_SEQ_NUM Server BMC Request</strong></p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head" colspan="2"><p><strong>Server BMC Request</strong></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Command code</p></td>
<td><p>0x49</p></td>
</tr>
<tr class="row-odd"><td><p>Data bytes</p></td>
<td><p>B0– Sector number (low byte)</p>
<p>B1– Sector number (high byte)</p>
</td>
</tr>
</tbody>
</table>
<p><em>Table:</em> <strong>FLASH_SECTOR_SET_SEQ_NUM Xilinx Alveo Card Response</strong></p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head" colspan="2"><p><strong>Xilinx Alveo Card Response</strong></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Data bytes</p></td>
<td><p>Byte0</p>
<p>0x01: Request success</p>
<p>0x02: Request failed</p>
</td>
</tr>
</tbody>
</table>
</section>
<section id="x4a-flash-copy-firmware">
<h2>0x4A - FLASH_COPY_FIRMWARE<a class="headerlink" href="#x4a-flash-copy-firmware" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>The BMC sends the FLASH_COPY_FIRMWARE command to initiate the copy of FW from one QSPI flash device to another. The BMC sends the source and destination flash devices via this command. Upon receiving this command the SC:</p>
</div></blockquote>
<ol class="arabic">
<li><p>Copies the sector contents from the source device into 64 Kbyte SRAM within SC FW.</p></li>
<li><p>Checks the CRC.</p></li>
<li><p>Copies the contents into the destination device, checks the CRC, and updates the sector sequence number.</p></li>
<li><p>If failure occurs in the middle of copy, erase all sectors in destination device (no retry support).</p></li>
<li><p>If the CRC is copied successfully, proceed with next sector.</p></li>
<li><p>The BMC can obtain the status of the copy from the FLASH_COPY_FIRMWARE_STATUS command.</p>
<blockquote>
<div><p><strong>*Note*:</strong> If the BMC sends another copy command while the previous copy is in-progress, the SC will ignore the request and respond appropriate error code. The BMC must check the status via the COPY_FIRMWARE_STATUS command and re-trigger. This command is currently supported only for Alveo U30.</p>
</div></blockquote>
</li>
</ol>
<p><em>Table:</em> <strong>FPGA_COPY_FIRMWARE Server BMC Request</strong></p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head" colspan="2"><p><strong>Server BMC Request</strong></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Command code</p></td>
<td><p>0x4A</p></td>
</tr>
<tr class="row-odd"><td><p>Byte0</p></td>
<td><p>B0 – Source flash device:</p>
<p>0x01 - FPGA1 Primary flash device</p>
<p>0x02 - FPGA1 Recovery flash device</p>
<p>0x03 - FPGA2 Primary flash device</p>
<p>0x04 - FPGA2 Recovery flash device</p>
</td>
</tr>
<tr class="row-even"><td><p>Byte1</p></td>
<td><p>B1 – Destination flash device:</p>
<p>0x01 - FPGA1 Primary flash device</p>
<p>0x02 - FPGA1 Recovery flash device</p>
<p>0x03 - FPGA2 Primary flash device</p>
<p>0x04 - FPGA2 Recovery flash device</p>
</td>
</tr>
</tbody>
</table>
<p><em>Table:</em> <strong>FPGA_COPY_FIRMWARE Xilinx Alveo Card Response</strong></p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head" colspan="3"><p><strong>Xilinx Alveo Card Response</strong></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Data bytes</p></td>
<td><p>B0</p></td>
<td><p>See table ‘Flash Operation Return Codes’ for SC’s response</p></td>
</tr>
</tbody>
</table>
</section>
<section id="x4b-fpga-get-firmware-status">
<h2>0x4B - FPGA_GET_FIRMWARE_STATUS<a class="headerlink" href="#x4b-fpga-get-firmware-status" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>The BMC sends the FPGA_GET_FIRMWARE_STATUS command to obtain the status of the previously triggered commands like
FLASH_BLOCK_CRC_CHECK and/or FLASH_COPY_FIRMWARE commands.</p>
</div></blockquote>
<p><em>Table:</em> <strong>FPGA_GET_FIRMWARE_STATUS Server BMC request</strong></p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head" colspan="2"><p><strong>Server BMC Request</strong></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Command code</p></td>
<td><p>0x4B</p></td>
</tr>
<tr class="row-odd"><td><p>Byte0</p></td>
<td><p>N/A</p></td>
</tr>
</tbody>
</table>
<p><em>Table:</em> <strong>FPGA_GET_FIRMWARE_STATUS Xilinx Alveo Card Response</strong></p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head" colspan="3"><p><strong>Xilinx Alveo Card Response</strong></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Data bytes</p></td>
<td><p>B0</p></td>
<td><p>See table ‘Flash Operation Return Codes’ for SC’s response</p></td>
</tr>
</tbody>
</table>
</section>
<section id="x4c-fpga-set-key-nonce">
<h2>0x4C - FPGA_SET_KEY_NONCE<a class="headerlink" href="#x4c-fpga-set-key-nonce" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p><strong>*Note*:</strong> This command is optional and only supported in Alveo U30.</p>
<blockquote>
<div><p>BMC provides the SC with a randomly generated key and nonce. The SC writes the 16-byte AES128 key and 96-bit (12-byte) nonce value to the SC internal flash storage. The SC provisions storage for one key and one nonce per flash device.</p>
<p>SC uses 15-byte nonce, by padding 3 bytes (with 0x00) at the start, to the 12-byte nonce sent by BMC (i.e.) LSB 3 bytes are 0x00. In other words, Bytes[14-3] - 12-bytes of nonce sent by BMC, Bytes[2-0] - 0x00 0x00 0x00. BMC must use the exact nonce scheme to calculate the MAC value for comparison. The BMC is expected to select the target flash device.</p>
</div></blockquote>
</div></blockquote>
<p><em>Table:</em> <strong>FPGA_SET_KEY_NONCE Server BMC Request</strong></p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head" colspan="2"><p><strong>Server BMC Request</strong></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Command code</p></td>
<td><p>0x4C</p></td>
</tr>
<tr class="row-odd"><td><p>Byte0</p></td>
<td><p>B0 – Target flash device:</p>
<p>0x01 - FPGA1 Primary flash device</p>
<p>0x02 - FPGA1 Recovery flash device</p>
<p>0x03 - FPGA2 Primary flash device</p>
<p>0x04 - FPGA2 Recovery flash device</p>
</td>
</tr>
<tr class="row-even"><td><p>Byte1 -16</p></td>
<td><p>16-byte key</p></td>
</tr>
<tr class="row-odd"><td><p>Byte17 - 28</p></td>
<td><p>12-byte nonce</p></td>
</tr>
</tbody>
</table>
<p><em>Table:</em> <strong>FPGA_SET_KEY_NONCE Xilinx Alveo Card Response</strong></p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head" colspan="3"><p><strong>Xilinx Alveo Card Response</strong></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Data bytes</p></td>
<td><p>B0</p></td>
<td><p>See table ‘Flash Operation Return Codes’ for SC’s response</p></td>
</tr>
</tbody>
</table>
</section>
<section id="x4d-fpga-calc-mac">
<h2>0x4D - FPGA_CALC_MAC<a class="headerlink" href="#x4d-fpga-calc-mac" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><blockquote>
<div><p><strong>*Note*:</strong> This command is optional. If sent, this command must be preceded by FPGA_SET_KEY_NONCE. This command is only supported in Alveo U30</p>
</div></blockquote>
<p>The BMC is expected to call the FPGA_CALC_MAC command after the entire flash image is written. The BMC is expected to select the target flash device. Upon receiving this command, the SC increments the stored nonce by 1, calculates the MAC of the 128 MByte region using the existing key and the new nonce value, and stores the MAC in the SC internal flash.</p>
</div></blockquote>
<p><em>Table:</em> <strong>FPGA_CALC_MAC Server BMC Request</strong></p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head" colspan="2"><p><strong>Server BMC Request</strong></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Command code</p></td>
<td><p>0x4D</p></td>
</tr>
<tr class="row-odd"><td><p>Byte0</p></td>
<td><p>B0 – Target flash device:</p>
<p>0x01 - FPGA1 Primary flash device</p>
<p>0x02 - FPGA1 Recovery flash device</p>
<p>0x03 - FPGA2 Primary flash device</p>
<p>0x04 - FPGA2 Recovery flash device</p>
</td>
</tr>
</tbody>
</table>
<p><em>Table:</em> <strong>FPGA_CALC_MAC Xilinx Alveo Card Response</strong></p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head" colspan="3"><p><strong>Xilinx Alveo Card Response</strong></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Data bytes</p></td>
<td><p>B0</p></td>
<td><p>See table ‘Flash Operation Return Codes’ for SC’s response</p></td>
</tr>
</tbody>
</table>
</section>
<section id="x4e-fpga-verify-mac">
<h2>0x4E - FPGA_VERIFY_MAC<a class="headerlink" href="#x4e-fpga-verify-mac" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p><strong>NOTE:</strong> This command must be preceded by
FPGA_SET_KEY_NONCE. This command is supported only in Alveo U30.*</p>
<p>The BMC sends the FPGA_VERIFY_MAC command to validate the QSPI
flash image. The SC calculates the Message Authentication Code (MAC)
of the 128 MByte region using the existing key and existing nonce
value and compares the resulting MAC to the stored MAC.</p>
</div></blockquote>
<p><em>Table:</em> <strong>FPGA_VERIFY_MAC Server BMC Request</strong></p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head" colspan="2"><p><strong>Server BMC Request</strong></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Command code</p></td>
<td><p>0x4E</p></td>
</tr>
<tr class="row-odd"><td><p>Byte0</p></td>
<td><p>B0 – Target flash device:</p>
<p>0x01 - FPGA1 Primary flash device</p>
<p>0x02 - FPGA1 Recovery flash device</p>
<p>0x03 - FPGA2 Primary flash device</p>
<p>0x04 - FPGA2 Recovery flash device</p>
</td>
</tr>
</tbody>
</table>
<p><em>Table:</em> <strong>FPGA_VERIFY_MAC Xilinx Alveo Card Response</strong></p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head" colspan="3"><p><strong>Xilinx Alveo Card Response</strong></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Data bytes</p></td>
<td><p>B0</p></td>
<td><p>See table ‘Flash Operation Return Codes’ for SC’s response</p></td>
</tr>
</tbody>
</table>
</section>
<section id="x4f-fpga-get-mac-status">
<h2>0x4F - FPGA_GET_MAC_STATUS<a class="headerlink" href="#x4f-fpga-get-mac-status" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>This command is only supported in Alveo U30 card. The BMC sends the FPGA_GET_MAC_STATUS command to get the
status of FPGA_CALC_MAC or FPGA_VERIFY_MAC command. SC responds with the status of MAC calculation or
verification via Byte 0 and 16-byte MAC value for BMC’s consumption via Byte 1 - Byte 16.</p>
<p><strong>*Note*:</strong> Server BMC must use the same key and nonce that the satellite controller used to compute the MAC value to obtain same results. Refer 0x4C and 0x4D command description for details.</p>
</div></blockquote>
<p><em>Table:</em> <strong>FPGA_GET_MAC_STATUS Server BMC Request</strong></p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head" colspan="2"><p><strong>Server BMC Request</strong></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Command code</p></td>
<td><p>0x4F</p></td>
</tr>
<tr class="row-odd"><td><p>Byte0</p></td>
<td><p>0x01 - FPGA1 Primary flash device</p>
<p>0x02 - FPGA1 Recovery flash device</p>
<p>0x03 - FPGA2 Primary flash device</p>
<p>0x04 - FPGA2 Recovery flash device</p>
</td>
</tr>
<tr class="row-even"><td><p>Byte1</p></td>
<td><p>0x01 – Get FPGA_CALC_MAC status</p>
<p>0x02 – Get FPGA_VERIFY_MAC status</p>
</td>
</tr>
</tbody>
</table>
<p><em>Table:</em> <strong>FPGA_GET_MAC_STATUS Xilinx Alveo Card Response</strong></p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head" colspan="3"><p><strong>Xilinx Alveo Card Response</strong></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Data bytes</p></td>
<td><p>B0</p></td>
<td><p>See table ‘Flash Operation Return Codes’ for SC’s response</p></td>
</tr>
<tr class="row-odd"><td></td>
<td><p>Bytes 1 - 16</p></td>
<td><p>16 Byte MAC value (LSB first)</p></td>
</tr>
</tbody>
</table>
</section>
<section id="x50-fpga-set-image-size">
<h2>0x50 - FPGA_SET_IMAGE_SIZE<a class="headerlink" href="#x50-fpga-set-image-size" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>The BMC sends this command to notify the SC about the size of the FPGA image that it indents to update. The byte-0 selects the target FPGA flash device and the byte1 – byte 5 (4 bytes, unsigned) represents the size of flash image in bytes.</p>
</div></blockquote>
<p><em>Table:</em> <strong>FPGA_SET_IMAGE_SIZE server BMC request</strong></p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head" colspan="2"><p><strong>Server BMC request</strong></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Command code</p></td>
<td><p>0x50</p></td>
</tr>
<tr class="row-odd"><td><p>Byte0</p></td>
<td><p>0x01 - FPGA1 Primary flash device</p>
<p>0x02 - FPGA1 Recovery flash device</p>
<p>0x03 - FPGA2 Primary flash device</p>
<p>0x04 - FPGA2 Recovery flash device</p>
</td>
</tr>
<tr class="row-even"><td><p>Byte 1-5</p></td>
<td><p>Size of QSPI image (in bytes)</p></td>
</tr>
</tbody>
</table>
<p><em>Table:</em> <strong>FPGA_SET_IMAGE_SIZE Xilinx Alveo Card Response</strong></p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head" colspan="3"><p><strong>Xilinx Alveo Card Response</strong></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Data bytes</p></td>
<td><p>B0</p></td>
<td><p>See table ‘Flash Operation Return Codes’ for SC’s response</p></td>
</tr>
</tbody>
</table>
</section>
<section id="x51-notify-wp-to-fpga">
<h2>0x51 - NOTIFY_WP_TO_FPGA<a class="headerlink" href="#x51-notify-wp-to-fpga" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>BMC sends this command to request SC to notify the FPGA device about WP status of the flash device. In turn, SC communicates the flash device WP status to FPGA via UART messages. BMC shall send this command prior to initiating the in-band QSPI FW update so that host OS can read the WP status from PCIe BAR config space.</p>
</div></blockquote>
<p><em>Table:</em> <strong>NOTIFY_WP_TO_FPGA server BMC request</strong></p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head" colspan="2"><p><strong>Server BMC request</strong></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Command code</p></td>
<td><p>0x51</p></td>
</tr>
<tr class="row-odd"><td><p>Byte0</p></td>
<td><p>0x01 - FPGA1 Primary flash device</p>
<p>0x02 - FPGA1 Recovery flash device</p>
<p>0x03 - FPGA2 Primary flash device</p>
<p>0x04 - FPGA2 Recovery flash device</p>
</td>
</tr>
</tbody>
</table>
<p><em>Table:</em> <strong>NOTIFY_WP_TO_FPGA Xilinx Alveo Card Response</strong></p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head" colspan="3"><p><strong>Xilinx Alveo Card Response</strong></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Data bytes</p></td>
<td><p>B0</p></td>
<td><p>0x01: Operation Success; 0x02: Operation failure</p></td>
</tr>
</tbody>
</table>
<p><strong>Xilinx Support</strong></p>
<p>For support resources such as answers, documentation, downloads, and forums, see the <a class="reference external" href="https://forums.xilinx.com/t5/Alveo-Accelerator-Cards/bd-p/alveo">Alveo Accelerator Cards Xilinx Community Forum</a>.</p>
<p><strong>License</strong></p>
<p>Licensed under the Apache License, Version 2.0 (the “License”); you may not use this file except in compliance with the License.</p>
<p>You may obtain a copy of the License at
<a class="reference external" href="http://www.apache.org/licenses/LICENSE-2.0">http://www.apache.org/licenses/LICENSE-2.0</a></p>
<p>All images and documentation, including all debug and support documentation, are licensed under the Creative Commons (CC) Attribution 4.0 International License (the “CC-BY-4.0 License”); you may not use this file except in compliance with the CC-BY-4.0 License.</p>
<p>You may obtain a copy of the CC-BY-4.0 License at
<a class="reference external" href="https://creativecommons.org/licenses/by/4.0/">https://creativecommons.org/licenses/by/4.0/</a></p>
<p>Unless required by applicable law or agreed to in writing, software distributed under the License is distributed on an “AS IS” BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions and limitations under the License.</p>
<p align="center"><sup>XD038 | &copy; Copyright 2021 Xilinx, Inc.</sup></p></section>
</section>


           </div>
           
          </div>
          <footer>
<!-- Atalwar: Moved the footer code to layout.html to resolve conflict with the Xilinx template -->
</footer>

        </div>
      </div>


	  <!-- Sphinx Page Footer block -->
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="dmtf-support.html" class="btn btn-neutral float-right" title="DMTF Implementation" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="sc-firmware-update.html" class="btn btn-neutral float-left" title="Satellite Controller Firmware Update Commands" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo" class="copyright">
    <p class="footerinfo">
      <span class="lastupdated">
        Last updated on February 14, 2022.
      </span>

    </p>
	<br>
  </div>
      </div>
    </section>


  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

   <script type="text/javascript">
    jQuery(function() { Search.loadIndex("searchindex.js"); });
  </script>

  <script type="text/javascript" id="searchindexloader"></script>


  
  
    
  



  <!--  Xilinx template footer block -->
							</div>
						</div>
					</div>
				</div>
				<div class="xilinxExperienceFragments experiencefragment aem-GridColumn--default--none aem-GridColumn aem-GridColumn--offset--default--0 aem-GridColumn--default--16">
					<div class="xf-content-height">
						<div class="aem-Grid aem-Grid--16 aem-Grid--default--16 ">
							<div class="footer parbase aem-GridColumn--default--none aem-GridColumn aem-GridColumn--offset--default--0 aem-GridColumn--default--16">
								<noindex>
                  <!-- make footer fixed - NileshP -->
                  <style>
                        .footer {
                        position: fixed;
                        left: 0;
                        bottom: 0;
                        width: 100%;
                        }
                  </style>
                  <!-- make footer fixed NileshP-->
									<footer>
										<div class="aem-Grid aem-Grid--16">
											<div class="aem-GridColumn aem-GridColumn--xxxlarge--none aem-GridColumn--xsmall--16 aem-GridColumn--offset--xsmall--0 aem-GridColumn--xlarge--none aem-GridColumn--xxlarge--none aem-GridColumn--default--none aem-GridColumn--offset--large--1 aem-GridColumn--xlarge--12 aem-GridColumn--offset--default--0 aem-GridColumn--xxlarge--10 aem-GridColumn--offset--xlarge--2 aem-GridColumn--offset--xxlarge--3 aem-GridColumn--offset--xxxlarge--4 aem-GridColumn--xsmall--none aem-GridColumn--large--none aem-GridColumn aem-GridColumn--large--14 aem-GridColumn--xxxlarge--8 aem-GridColumn--default--16">
												<div class="container-fluid sub-footer">
													<div class="row">
														<div class="footerSocial parbase">
														
															<div class="col-md-push-6 col-lg-push-6 col-md-6 col-lg-6">
																<div class="lang-select dropup hidden-md hidden-lg">
		<button data-toggle="dropdown">
			<span class="fas fa-globe" aria-hidden="true"></span>
			<span>
				
					English
				</span>
		<span class="far fa-angle-down" aria-hidden="true"></span>
	</button>
	<ul class="dropdown-menu">
		<li>
				<a target="_blank" href="https://japan.xilinx.com/" target="_self">
					日本語
				</a>
			</li>
		<li>
				<a target="_blank" href="https://china.xilinx.com/" target="_self">
					简体中文
				</a>
			</li>
		</ul>
	</div>
																<ul class="list-inline pull-right social-menu">
																	<li>
																		<a target="_blank" href="https://www.linkedin.com/company/xilinx">
																		<span class="linkedin icon"></span>
																		<span class="sr-only">Connect on LinkedIn</span>
																		</a>
																	</li>
																	<li>
																		<a target="_blank" href="https://www.twitter.com/XilinxInc">
																		<span class="twitter icon"></span>
																		<span class="sr-only">Follow us on Twitter</span>
																		</a>
																	</li>
																	<li>
																		<a target="_blank" href="https://www.facebook.com/XilinxInc">
																		<span class="facebook icon"></span>
																		<span class="sr-only">Connect on Facebook</span>
																		</a>
																	</li>
																	<li>
																		<a target="_blank" href="https://www.youtube.com/XilinxInc">
																		<span class="youtube icon"></span>
																		<span class="sr-only">Watch us on YouTube</span>
																		</a>
																	</li>
																	<li>
																		<a target="_blank" href="https://www.xilinx.com/registration/subscriber-signup.html">
																		<span class="newsletter icon"></span>
																		<span class="sr-only">Subscribe to Newsletter</span>
																		</a>
																	</li>
																</ul>
																	<div class="lang-select dropup hidden-xs hidden-sm">
	<button data-toggle="dropdown">
		<span class="fas fa-globe" aria-hidden="true"></span>
		<span>
			
				English
			</span>
		<span class="far fa-angle-down" aria-hidden="true"></span>
	</button>
	<ul class="dropdown-menu">
		<li>
				<a target="_blank" href="https://japan.xilinx.com/" target="_self">
					日本語
				</a>
			</li>
		<li>
				<a target="_blank" href="https://china.xilinx.com/" target="_self">
					简体中文
				</a>
			</li>
		</ul>
	</div>
															</div>
														</div>
														<div class="col-md-pull-5 col-lg-pull-5 col-md-5 col-lg-5">
															<span class="copyright">©2022 Advanced Micro Devices, Inc</span>
														</div>

													</div>
													                    <div class="movethisrowtoleft row">
                        <div class="col-xs-24">
                            <ul class="sub-menu">
                                <li><a target="_blank" href="https://www.amd.com/en/corporate/copyright">Terms and Conditions</a></li>
                                <li><a target="_blank" href="https://www.amd.com/en/corporate/privacy">Privacy</a></li>
                                <li><a target="_blank" href="https://www.amd.com/en/corporate/cookies">Cookie Policy</a></li>
                                <li><a target="_blank" href="https://www.amd.com/en/corporate/trademarks">Trademarks</a></li>
                                <li><a target="_blank" href="https://www.amd.com/system/files/documents/statement-human-trafficking-forced-labor.pdf">Statement on Forced Labor</a></li>
                                <li><a target="_blank" href="https://www.amd.com/en/corporate/competition">Fair and Open Competition</a></li>
                                <li><a target="_blank" href="https://www.amd.com/system/files/documents/amd-uk-tax-strategy.pdf">UK Tax Strategy</a></li>
								<li><a target="_blank" href="https://docs.xilinx.com/v/u/9x6YvZKuWyhJId7y7RQQKA">Inclusive Terminology</a></li>
                                <li><a href="#cookiessettings" class="ot-sdk-show-settings">Cookies Settings</a></li>
                            </ul>
                        </div>
                    </div>
												</div>
											</div>
										</div>
									</footer>
								</noindex>
							</div>
						</div>
					</div>
				</div>
<div class="backToTop parbase aem-GridColumn--default--none aem-GridColumn aem-GridColumn--offset--default--0 aem-GridColumn--default--16"><noindex>
    <span data-component="backToTopButton" class="backToTopButton loaded">
        <ul>
            <li>
                <a href="https://www.author.xilinx.com/xx/rebrand/amd/en-amd-xilinx-header-footer.html#top" class="btn top">
                    <span class="fas fa-angle-up" aria-hidden="true"></span>
                </a>
            </li>
        </ul>
    </span>
</noindex></div>
			</div>
		</div>


		<script>window.CQ = window.CQ || {}</script>
		<script src="https://static.cloud.coveo.com/searchui/v2.4382/js/CoveoJsSearch.Lazy.min.js"></script>
		<script>
			var underscoreSetup = function () {
			  _.templateSettings.interpolate = /\{\{=([^-][\S\s]+?)\}\}/g;
			  _.templateSettings.evaluate = /\{\{([^-=][\S\s]+?)\}\}/g;
			  _.templateSettings.escape = /\{\{-([^=][\S\s]+?)\}\}/g;
			}

			underscoreSetup();
		</script>
	</body>
</html>